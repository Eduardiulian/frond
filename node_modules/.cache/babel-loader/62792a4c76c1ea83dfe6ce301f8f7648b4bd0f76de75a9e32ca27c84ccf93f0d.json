{"ast":null,"code":"import{io}from'socket.io-client';import{processGameUpdate}from'./state.js';const socket=io('http://localhost/api/websocket');const JOIN_GAME='JOIN_GAME';const GAME_UPDATE='GAME_UPDATE';const INPUT='INPUT';const INPUT_KEY='INPUT_KEY';const SHOOT_KEY='SHOOT_KEY';const GAME_OVER='GAME_OVER';const connectedPromise=new Promise(resolve=>{socket.on('connect',()=>{console.log('Connected to server!');resolve();});});export const connect=onGameOver=>connectedPromise.then(()=>{socket.on(GAME_UPDATE,processGameUpdate);socket.on(GAME_OVER,onGameOver);socket.on('disconnect',()=>{console.log('Disconnected from server.');document.getElementById('disconnect-modal').classList.remove('hidden');document.getElementById('reconnect-button').onclick=()=>{window.location.reload();};});});export const play=username=>{socket.emit(JOIN_GAME,username);};export const updateDirection=dir=>{socket.emit(INPUT,dir);};export const updateMove=dir=>{socket.emit(INPUT_KEY,dir);};export const ShootDirection=dir=>{socket.emit(SHOOT_KEY,dir);};","map":{"version":3,"names":["io","processGameUpdate","socket","JOIN_GAME","GAME_UPDATE","INPUT","INPUT_KEY","SHOOT_KEY","GAME_OVER","connectedPromise","Promise","resolve","on","console","log","connect","onGameOver","then","document","getElementById","classList","remove","onclick","window","location","reload","play","username","emit","updateDirection","dir","updateMove","ShootDirection"],"sources":["/home/edi/secario.fun/frondend/src/services/networking.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { processGameUpdate } from './state.js';\nconst socket = io('http://localhost/api/websocket');\nconst JOIN_GAME = 'JOIN_GAME';\nconst GAME_UPDATE = 'GAME_UPDATE';\nconst INPUT = 'INPUT'\nconst INPUT_KEY = 'INPUT_KEY'\nconst SHOOT_KEY = 'SHOOT_KEY'\nconst GAME_OVER = 'GAME_OVER'\n\nconst connectedPromise = new Promise(resolve => {\n    socket.on('connect', () => {\n        console.log('Connected to server!');\n        resolve();\n    });\n})\n\n\nexport const connect = onGameOver => (\n    connectedPromise.then(() => {\n        socket.on(GAME_UPDATE, processGameUpdate);\n        socket.on(GAME_OVER, onGameOver);\n        socket.on('disconnect', () => {\n            console.log('Disconnected from server.');\n            document.getElementById('disconnect-modal').classList.remove('hidden');\n            document.getElementById('reconnect-button').onclick = () => {\n                window.location.reload();\n            };\n        });\n    })\n);\n\nexport const play = username => {\n    socket.emit(JOIN_GAME, username);\n};\n\nexport const updateDirection = dir => {\n    socket.emit(INPUT, dir);\n};\n\nexport const updateMove = dir =>{\n    socket.emit(INPUT_KEY, dir);\n\n};\n\nexport const ShootDirection = dir =>{\n    socket.emit(SHOOT_KEY, dir);\n\n};\n"],"mappings":"AAAA,OAASA,EAAE,KAAQ,kBAAkB,CACrC,OAASC,iBAAiB,KAAQ,YAAY,CAC9C,KAAM,CAAAC,MAAM,CAAGF,EAAE,CAAC,gCAAgC,CAAC,CACnD,KAAM,CAAAG,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,WAAW,CAAG,aAAa,CACjC,KAAM,CAAAC,KAAK,CAAG,OAAO,CACrB,KAAM,CAAAC,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,SAAS,CAAG,WAAW,CAE7B,KAAM,CAAAC,gBAAgB,CAAG,GAAI,CAAAC,OAAO,CAACC,OAAO,EAAI,CAC5CT,MAAM,CAACU,EAAE,CAAC,SAAS,CAAE,IAAM,CACvBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnCH,OAAO,CAAC,CAAC,CACb,CAAC,CAAC,CACN,CAAC,CAAC,CAGF,MAAO,MAAM,CAAAI,OAAO,CAAGC,UAAU,EAC7BP,gBAAgB,CAACQ,IAAI,CAAC,IAAM,CACxBf,MAAM,CAACU,EAAE,CAACR,WAAW,CAAEH,iBAAiB,CAAC,CACzCC,MAAM,CAACU,EAAE,CAACJ,SAAS,CAAEQ,UAAU,CAAC,CAChCd,MAAM,CAACU,EAAE,CAAC,YAAY,CAAE,IAAM,CAC1BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxCI,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC,CACtEH,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACG,OAAO,CAAG,IAAM,CACxDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CAAC,CACL,CAAC,CAAC,CACN,CAAC,CACJ,CAED,MAAO,MAAM,CAAAC,IAAI,CAAGC,QAAQ,EAAI,CAC5BzB,MAAM,CAAC0B,IAAI,CAACzB,SAAS,CAAEwB,QAAQ,CAAC,CACpC,CAAC,CAED,MAAO,MAAM,CAAAE,eAAe,CAAGC,GAAG,EAAI,CAClC5B,MAAM,CAAC0B,IAAI,CAACvB,KAAK,CAAEyB,GAAG,CAAC,CAC3B,CAAC,CAED,MAAO,MAAM,CAAAC,UAAU,CAAGD,GAAG,EAAG,CAC5B5B,MAAM,CAAC0B,IAAI,CAACtB,SAAS,CAAEwB,GAAG,CAAC,CAE/B,CAAC,CAED,MAAO,MAAM,CAAAE,cAAc,CAAGF,GAAG,EAAG,CAChC5B,MAAM,CAAC0B,IAAI,CAACrB,SAAS,CAAEuB,GAAG,CAAC,CAE/B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}