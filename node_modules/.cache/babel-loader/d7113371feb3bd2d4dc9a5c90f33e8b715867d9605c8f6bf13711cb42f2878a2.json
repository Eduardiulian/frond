{"ast":null,"code":"import { updateDirection, updateMove, ShootDirection } from './networking.js';\nconst inputs = {\n  keyDownActions: {\n    'ArrowLeft': {\n      x: -1.5,\n      y: 0\n    },\n    'ArrowRight': {\n      x: 1.5,\n      y: 0\n    },\n    'ArrowUp': {\n      y: -1.5,\n      x: 0\n    },\n    'ArrowDown': {\n      y: 1.5,\n      x: 0\n    },\n    'UpRight': {\n      y: -1.5,\n      x: 1.5\n    },\n    'UpLeft': {\n      y: -1.5,\n      x: -1.5\n    },\n    'DownRight': {\n      y: 1.5,\n      x: 1.5\n    },\n    'DownLeft': {\n      y: 1.5,\n      x: -1.5\n    }\n  }\n};\nlet keys = {\n  'ArrowLeft': false,\n  'ArrowRight': false,\n  'ArrowUp': false,\n  'ArrowDown': false\n};\nfunction onkeydownInput(e) {\n  keys[e.key] = true;\n  keydownHandler(e);\n}\nfunction onkeyupInput(e) {\n  keys[e.key] = false;\n}\nfunction keydownHandler(e) {\n  let vals;\n  if (keys['ArrowUp'] && keys['ArrowRight']) {\n    vals = inputs.keyDownActions['UpRight'];\n  } else if (keys['ArrowUp'] && keys['ArrowLeft']) {\n    vals = inputs.keyDownActions['UpLeft'];\n  } else if (keys['ArrowDown'] && keys['ArrowLeft']) {\n    vals = inputs.keyDownActions['DownLeft'];\n  } else if (keys['ArrowDown'] && keys['ArrowRight']) {\n    vals = inputs.keyDownActions['DownRight'];\n  } else {\n    vals = inputs.keyDownActions[e.key];\n  }\n  if (vals) {\n    updateMove(vals);\n    const angle = vals;\n  }\n}\nfunction onMouseInput(e) {\n  const dir = {\n    x: e.clientX,\n    y: e.clientY\n  };\n  updateDirection(dir);\n}\nfunction onClickInput(e) {\n  const dir = Math.atan2(e.clientX - window.innerWidth / 2, window.innerHeight / 2 - e.clientY);\n  ShootDirection(dir);\n}\nexport function startCapturingInput() {\n  window.addEventListener('mousemove', onMouseInput);\n  window.addEventListener('keydown', onkeydownInput);\n  window.addEventListener('keyup', onkeyupInput);\n  window.addEventListener('click', onClickInput);\n}\nexport function stopCapturingInput() {\n  window.removeEventListener('mousemove', onMouseInput);\n  window.removeEventListener('keydown', onkeydownInput);\n  window.removeEventListener('keyup', onkeyupInput);\n  window.removeEventListener('click', onClickInput);\n}","map":{"version":3,"names":["updateDirection","updateMove","ShootDirection","inputs","keyDownActions","x","y","keys","onkeydownInput","e","key","keydownHandler","onkeyupInput","vals","angle","onMouseInput","dir","clientX","clientY","onClickInput","Math","atan2","window","innerWidth","innerHeight","startCapturingInput","addEventListener","stopCapturingInput","removeEventListener"],"sources":["/home/edi/secario.fun/frondend/src/services/input.js"],"sourcesContent":["import { updateDirection, updateMove, ShootDirection } from './networking.js';\n\nconst inputs = {\n    keyDownActions: {\n        'ArrowLeft':  { x:-1.5, y: 0 },\n        'ArrowRight': { x: 1.5,  y: 0 },\n        'ArrowUp':   {  y:-1.5, x: 0 },\n        'ArrowDown': {  y: 1.5,  x: 0 },\n\n        'UpRight': {   y:-1.5, x:  1.5 },\n        'UpLeft': {    y:-1.5, x: -1.5 },\n        'DownRight': { y: 1.5,  x: 1.5 },\n        'DownLeft': {  y: 1.5,  x:-1.5 },\n    }\n}\nlet keys = {\n    'ArrowLeft': false,\n    'ArrowRight': false,\n    'ArrowUp': false,\n    'ArrowDown': false,\n}\nfunction onkeydownInput(e) {\n    keys[e.key] = true\n    keydownHandler(e)\n\n}\n\nfunction onkeyupInput(e) {\n    keys[e.key] = false\n\n}\n\nfunction keydownHandler(e) {\n    let vals;\n    if (keys['ArrowUp'] && keys['ArrowRight']) {\n\n        vals = inputs.keyDownActions['UpRight']\n    } else if (keys['ArrowUp'] && keys['ArrowLeft']) {\n        vals = inputs.keyDownActions['UpLeft']\n    }\n    else if (keys['ArrowDown'] && keys['ArrowLeft']) {\n        vals = inputs.keyDownActions['DownLeft']\n    }\n    else if (keys['ArrowDown'] && keys['ArrowRight']) {\n        vals = inputs.keyDownActions['DownRight']\n    }\n    else {\n        vals = inputs.keyDownActions[e.key];\n    }\n    if (vals) {\n        updateMove(vals);\n        const angle = vals;\n    }\n}\n\nfunction onMouseInput(e) {\n    const dir = { x: e.clientX, y: e.clientY };\n    updateDirection(dir);\n}\n\nfunction onClickInput(e) {\n    const dir = Math.atan2(e.clientX - window.innerWidth / 2, window.innerHeight / 2 - e.clientY)\n    ShootDirection(dir);\n}\n\n\nexport function startCapturingInput() {\n    window.addEventListener('mousemove', onMouseInput);\n    window.addEventListener('keydown', onkeydownInput);\n    window.addEventListener('keyup', onkeyupInput);\n    window.addEventListener('click', onClickInput);\n}\n\nexport function stopCapturingInput() {\n    window.removeEventListener('mousemove', onMouseInput);\n    window.removeEventListener('keydown', onkeydownInput);\n    window.removeEventListener('keyup', onkeyupInput);\n    window.removeEventListener('click', onClickInput);\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}