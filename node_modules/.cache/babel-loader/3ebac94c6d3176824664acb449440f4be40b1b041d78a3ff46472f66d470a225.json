{"ast":null,"code":"import{io}from'socket.io-client';import{processGameUpdate}from'./state.js';const socket=io('http://5.35.89.173:5000',{'path':'/api/websocket'});const JOIN_GAME='JOIN_GAME';const GAME_UPDATE='GAME_UPDATE';const INPUT='INPUT';const INPUT_KEY='INPUT_KEY';const SHOOT_KEY='SHOOT_KEY';const GAME_OVER='GAME_OVER';const SPACE_KEY='SPACE_KEY';const connectedPromise=new Promise(resolve=>{socket.on('connect',()=>{console.log('Connected to server!');resolve();});});export const connect=onGameOver=>connectedPromise.then(()=>{socket.on(GAME_UPDATE,processGameUpdate);socket.on(GAME_OVER,onGameOver);socket.on('disconnect',()=>{console.log('Disconnected from server.');document.getElementById('disconnect-modal').classList.remove('hidden');document.getElementById('reconnect-button').onclick=()=>{window.location.reload();};});});export const play=username=>{socket.emit(JOIN_GAME,username);};export const updateDirection=dir=>{socket.emit(INPUT,dir);};export const updateMove=dir=>{const dirAngle=Math.atan2(dir.x,dir.y);socket.emit(INPUT_KEY,dir,dirAngle);};export const ShootDirection=dir=>{socket.emit(SHOOT_KEY,dir);};export const SetProtected=()=>{socket.emit(SPACE_KEY);};","map":{"version":3,"names":["io","processGameUpdate","socket","JOIN_GAME","GAME_UPDATE","INPUT","INPUT_KEY","SHOOT_KEY","GAME_OVER","SPACE_KEY","connectedPromise","Promise","resolve","on","console","log","connect","onGameOver","then","document","getElementById","classList","remove","onclick","window","location","reload","play","username","emit","updateDirection","dir","updateMove","dirAngle","Math","atan2","x","y","ShootDirection","SetProtected"],"sources":["/home/edi/secario.fun/frondend/src/services/networking.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { processGameUpdate } from './state.js';\nconst socket = io('http://5.35.89.173:5000', { 'path': '/api/websocket' });\nconst JOIN_GAME = 'JOIN_GAME';\nconst GAME_UPDATE = 'GAME_UPDATE';\nconst INPUT = 'INPUT'\nconst INPUT_KEY = 'INPUT_KEY'\nconst SHOOT_KEY = 'SHOOT_KEY'\nconst GAME_OVER = 'GAME_OVER'\nconst SPACE_KEY = 'SPACE_KEY'\n\nconst connectedPromise = new Promise(resolve => {\n    socket.on('connect', () => {\n        console.log('Connected to server!');\n        resolve();\n    });\n})\n\n\nexport const connect = onGameOver => (\n    connectedPromise.then(() => {\n        socket.on(GAME_UPDATE, processGameUpdate);\n        socket.on(GAME_OVER, onGameOver);\n        socket.on('disconnect', () => {\n            console.log('Disconnected from server.');\n            document.getElementById('disconnect-modal').classList.remove('hidden');\n            document.getElementById('reconnect-button').onclick = () => {\n                window.location.reload();\n            };\n        });\n    })\n);\n\nexport const play = username => {\n    socket.emit(JOIN_GAME, username);\n};\n\nexport const updateDirection = dir => {\n    socket.emit(INPUT, dir);\n};\n\nexport const updateMove = dir => {\n    const dirAngle = Math.atan2(dir.x, dir.y)\n    socket.emit(INPUT_KEY, dir, dirAngle);\n\n};\n\nexport const ShootDirection = dir => {\n    socket.emit(SHOOT_KEY, dir);\n\n};\n\nexport const SetProtected =() =>{\n    socket.emit(SPACE_KEY);\n\n};\n"],"mappings":"AAAA,OAASA,EAAE,KAAQ,kBAAkB,CACrC,OAASC,iBAAiB,KAAQ,YAAY,CAC9C,KAAM,CAAAC,MAAM,CAAGF,EAAE,CAAC,yBAAyB,CAAE,CAAE,MAAM,CAAE,gBAAiB,CAAC,CAAC,CAC1E,KAAM,CAAAG,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,WAAW,CAAG,aAAa,CACjC,KAAM,CAAAC,KAAK,CAAG,OAAO,CACrB,KAAM,CAAAC,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,SAAS,CAAG,WAAW,CAC7B,KAAM,CAAAC,SAAS,CAAG,WAAW,CAE7B,KAAM,CAAAC,gBAAgB,CAAG,GAAI,CAAAC,OAAO,CAACC,OAAO,EAAI,CAC5CV,MAAM,CAACW,EAAE,CAAC,SAAS,CAAE,IAAM,CACvBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnCH,OAAO,CAAC,CAAC,CACb,CAAC,CAAC,CACN,CAAC,CAAC,CAGF,MAAO,MAAM,CAAAI,OAAO,CAAGC,UAAU,EAC7BP,gBAAgB,CAACQ,IAAI,CAAC,IAAM,CACxBhB,MAAM,CAACW,EAAE,CAACT,WAAW,CAAEH,iBAAiB,CAAC,CACzCC,MAAM,CAACW,EAAE,CAACL,SAAS,CAAES,UAAU,CAAC,CAChCf,MAAM,CAACW,EAAE,CAAC,YAAY,CAAE,IAAM,CAC1BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxCI,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC,CACtEH,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACG,OAAO,CAAG,IAAM,CACxDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CAAC,CACL,CAAC,CAAC,CACN,CAAC,CACJ,CAED,MAAO,MAAM,CAAAC,IAAI,CAAGC,QAAQ,EAAI,CAC5B1B,MAAM,CAAC2B,IAAI,CAAC1B,SAAS,CAAEyB,QAAQ,CAAC,CACpC,CAAC,CAED,MAAO,MAAM,CAAAE,eAAe,CAAGC,GAAG,EAAI,CAClC7B,MAAM,CAAC2B,IAAI,CAACxB,KAAK,CAAE0B,GAAG,CAAC,CAC3B,CAAC,CAED,MAAO,MAAM,CAAAC,UAAU,CAAGD,GAAG,EAAI,CAC7B,KAAM,CAAAE,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,CAAC,CAAEL,GAAG,CAACM,CAAC,CAAC,CACzCnC,MAAM,CAAC2B,IAAI,CAACvB,SAAS,CAAEyB,GAAG,CAAEE,QAAQ,CAAC,CAEzC,CAAC,CAED,MAAO,MAAM,CAAAK,cAAc,CAAGP,GAAG,EAAI,CACjC7B,MAAM,CAAC2B,IAAI,CAACtB,SAAS,CAAEwB,GAAG,CAAC,CAE/B,CAAC,CAED,MAAO,MAAM,CAAAQ,YAAY,CAAEA,CAAA,GAAK,CAC5BrC,MAAM,CAAC2B,IAAI,CAACpB,SAAS,CAAC,CAE1B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}