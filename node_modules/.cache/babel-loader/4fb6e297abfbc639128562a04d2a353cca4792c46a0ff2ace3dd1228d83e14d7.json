{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { processGameUpdate } from './state.js';\nconst socket = io('http://5.35.89.173:5000', {\n  'path': '/api/websocket'\n});\nconst JOIN_GAME = 'JOIN_GAME';\nconst GAME_UPDATE = 'GAME_UPDATE';\nconst INPUT = 'INPUT';\nconst INPUT_KEY = 'INPUT_KEY';\nconst SHOOT_KEY = 'SHOOT_KEY';\nconst GAME_OVER = 'GAME_OVER';\nconst SPACE_KEY = 'SPACE_KEY';\nconst connectedPromise = new Promise(resolve => {\n  socket.on('connect', () => {\n    console.log('Connected to server!');\n    resolve();\n  });\n});\nexport const connect = onGameOver => connectedPromise.then(() => {\n  socket.on(GAME_UPDATE, processGameUpdate);\n  socket.on(GAME_OVER, onGameOver);\n  socket.on('disconnect', () => {\n    console.log('Disconnected from server.');\n    document.getElementById('disconnect-modal').classList.remove('hidden');\n    document.getElementById('reconnect-button').onclick = () => {\n      window.location.reload();\n    };\n  });\n});\nexport const play = username => {\n  socket.emit(JOIN_GAME, username);\n};\nexport const updateDirection = dir => {\n  socket.emit(INPUT, dir);\n};\nexport const updateMove = dir => {\n  const dirAngle = Math.atan2(dir.x, dir.y);\n  socket.emit(INPUT_KEY, dir, dirAngle);\n};\nexport const ShootDirection = dir => {\n  socket.emit(SHOOT_KEY, dir);\n};\n_c = ShootDirection;\nexport const SetProtected = () => {\n  socket.emit(SPACE_KEY);\n};\n_c2 = SetProtected;\nvar _c, _c2;\n$RefreshReg$(_c, \"ShootDirection\");\n$RefreshReg$(_c2, \"SetProtected\");","map":{"version":3,"names":["io","processGameUpdate","socket","JOIN_GAME","GAME_UPDATE","INPUT","INPUT_KEY","SHOOT_KEY","GAME_OVER","SPACE_KEY","connectedPromise","Promise","resolve","on","console","log","connect","onGameOver","then","document","getElementById","classList","remove","onclick","window","location","reload","play","username","emit","updateDirection","dir","updateMove","dirAngle","Math","atan2","x","y","ShootDirection","_c","SetProtected","_c2","$RefreshReg$"],"sources":["/home/edi/secario.fun/frondend/src/services/networking.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { processGameUpdate } from './state.js';\nconst socket = io('http://5.35.89.173:5000', { 'path': '/api/websocket' });\nconst JOIN_GAME = 'JOIN_GAME';\nconst GAME_UPDATE = 'GAME_UPDATE';\nconst INPUT = 'INPUT'\nconst INPUT_KEY = 'INPUT_KEY'\nconst SHOOT_KEY = 'SHOOT_KEY'\nconst GAME_OVER = 'GAME_OVER'\nconst SPACE_KEY = 'SPACE_KEY'\n\nconst connectedPromise = new Promise(resolve => {\n    socket.on('connect', () => {\n        console.log('Connected to server!');\n        resolve();\n    });\n})\n\n\nexport const connect = onGameOver => (\n    connectedPromise.then(() => {\n        socket.on(GAME_UPDATE, processGameUpdate);\n        socket.on(GAME_OVER, onGameOver);\n        socket.on('disconnect', () => {\n            console.log('Disconnected from server.');\n            document.getElementById('disconnect-modal').classList.remove('hidden');\n            document.getElementById('reconnect-button').onclick = () => {\n                window.location.reload();\n            };\n        });\n    })\n);\n\nexport const play = username => {\n    socket.emit(JOIN_GAME, username);\n};\n\nexport const updateDirection = dir => {\n    socket.emit(INPUT, dir);\n};\n\nexport const updateMove = dir => {\n    const dirAngle = Math.atan2(dir.x, dir.y)\n    socket.emit(INPUT_KEY, dir, dirAngle);\n\n};\n\nexport const ShootDirection = dir => {\n    socket.emit(SHOOT_KEY, dir);\n\n};\n\nexport const SetProtected =() =>{\n    socket.emit(SPACE_KEY);\n\n};\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,iBAAiB,QAAQ,YAAY;AAC9C,MAAMC,MAAM,GAAGF,EAAE,CAAC,yBAAyB,EAAE;EAAE,MAAM,EAAE;AAAiB,CAAC,CAAC;AAC1E,MAAMG,SAAS,GAAG,WAAW;AAC7B,MAAMC,WAAW,GAAG,aAAa;AACjC,MAAMC,KAAK,GAAG,OAAO;AACrB,MAAMC,SAAS,GAAG,WAAW;AAC7B,MAAMC,SAAS,GAAG,WAAW;AAC7B,MAAMC,SAAS,GAAG,WAAW;AAC7B,MAAMC,SAAS,GAAG,WAAW;AAE7B,MAAMC,gBAAgB,GAAG,IAAIC,OAAO,CAACC,OAAO,IAAI;EAC5CV,MAAM,CAACW,EAAE,CAAC,SAAS,EAAE,MAAM;IACvBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IACnCH,OAAO,CAAC,CAAC;EACb,CAAC,CAAC;AACN,CAAC,CAAC;AAGF,OAAO,MAAMI,OAAO,GAAGC,UAAU,IAC7BP,gBAAgB,CAACQ,IAAI,CAAC,MAAM;EACxBhB,MAAM,CAACW,EAAE,CAACT,WAAW,EAAEH,iBAAiB,CAAC;EACzCC,MAAM,CAACW,EAAE,CAACL,SAAS,EAAES,UAAU,CAAC;EAChCf,MAAM,CAACW,EAAE,CAAC,YAAY,EAAE,MAAM;IAC1BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;IACxCI,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;IACtEH,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACG,OAAO,GAAG,MAAM;MACxDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC5B,CAAC;EACL,CAAC,CAAC;AACN,CAAC,CACJ;AAED,OAAO,MAAMC,IAAI,GAAGC,QAAQ,IAAI;EAC5B1B,MAAM,CAAC2B,IAAI,CAAC1B,SAAS,EAAEyB,QAAQ,CAAC;AACpC,CAAC;AAED,OAAO,MAAME,eAAe,GAAGC,GAAG,IAAI;EAClC7B,MAAM,CAAC2B,IAAI,CAACxB,KAAK,EAAE0B,GAAG,CAAC;AAC3B,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGD,GAAG,IAAI;EAC7B,MAAME,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,CAAC,EAAEL,GAAG,CAACM,CAAC,CAAC;EACzCnC,MAAM,CAAC2B,IAAI,CAACvB,SAAS,EAAEyB,GAAG,EAAEE,QAAQ,CAAC;AAEzC,CAAC;AAED,OAAO,MAAMK,cAAc,GAAGP,GAAG,IAAI;EACjC7B,MAAM,CAAC2B,IAAI,CAACtB,SAAS,EAAEwB,GAAG,CAAC;AAE/B,CAAC;AAACQ,EAAA,GAHWD,cAAc;AAK3B,OAAO,MAAME,YAAY,GAAEA,CAAA,KAAK;EAC5BtC,MAAM,CAAC2B,IAAI,CAACpB,SAAS,CAAC;AAE1B,CAAC;AAACgC,GAAA,GAHWD,YAAY;AAAA,IAAAD,EAAA,EAAAE,GAAA;AAAAC,YAAA,CAAAH,EAAA;AAAAG,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}