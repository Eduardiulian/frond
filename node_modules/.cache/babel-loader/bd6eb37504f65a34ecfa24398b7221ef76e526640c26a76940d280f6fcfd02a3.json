{"ast":null,"code":"import { updateDirection, updateMove, ShootDirection, SetProtected } from './networking.js';\nconst inputs = {\n  keyDownActions: {\n    'ArrowLeft': {\n      x: -1.5,\n      y: 0\n    },\n    'ArrowRight': {\n      x: 1.5,\n      y: 0\n    },\n    'ArrowUp': {\n      y: -1.5,\n      x: 0\n    },\n    'ArrowDown': {\n      y: 1.5,\n      x: 0\n    },\n    'UpRight': {\n      y: -1.5,\n      x: 1.5\n    },\n    'UpLeft': {\n      y: -1.5,\n      x: -1.5\n    },\n    'DownRight': {\n      y: 1.5,\n      x: 1.5\n    },\n    'DownLeft': {\n      y: 1.5,\n      x: -1.5\n    }\n  }\n};\nlet keys = {\n  'ArrowLeft': false,\n  'ArrowRight': false,\n  'ArrowUp': false,\n  'ArrowDown': false\n};\nfunction onkeydownInput(e) {\n  if (e.code === \"Space\") {\n    SetProtected();\n  } else {\n    keys[e.key] = true;\n    keydownHandler(e);\n  }\n}\nfunction onkeyupInput(e) {\n  keys[e.key] = false;\n}\nfunction keydownHandler(e) {\n  let vals;\n  if (keys['ArrowUp'] && keys['ArrowRight']) {\n    vals = inputs.keyDownActions['UpRight'];\n  } else if (keys['ArrowUp'] && keys['ArrowLeft']) {\n    vals = inputs.keyDownActions['UpLeft'];\n  } else if (keys['ArrowDown'] && keys['ArrowLeft']) {\n    vals = inputs.keyDownActions['DownLeft'];\n  } else if (keys['ArrowDown'] && keys['ArrowRight']) {\n    vals = inputs.keyDownActions['DownRight'];\n  } else {\n    vals = inputs.keyDownActions[e.key];\n  }\n  if (vals) {\n    updateMove(vals);\n  }\n}\nfunction onMouseInput(e) {\n  const dir = {\n    x: e.clientX,\n    y: e.clientY\n  };\n  updateDirection(dir);\n}\nfunction onClickInput(e) {\n  const dir = Math.atan2(e.clientX - window.innerWidth / 2, window.innerHeight / 2 - e.clientY);\n  ShootDirection(dir);\n}\nexport function startCapturingInput() {\n  window.addEventListener('mousemove', onMouseInput);\n  window.addEventListener('keydown', onkeydownInput);\n  window.addEventListener('keyup', onkeyupInput);\n  window.addEventListener('click', onClickInput);\n}\nexport function stopCapturingInput() {\n  window.removeEventListener('mousemove', onMouseInput);\n  window.removeEventListener('keydown', onkeydownInput);\n  window.removeEventListener('keyup', onkeyupInput);\n  window.removeEventListener('click', onClickInput);\n}","map":{"version":3,"names":["updateDirection","updateMove","ShootDirection","SetProtected","inputs","keyDownActions","x","y","keys","onkeydownInput","e","code","key","keydownHandler","onkeyupInput","vals","onMouseInput","dir","clientX","clientY","onClickInput","Math","atan2","window","innerWidth","innerHeight","startCapturingInput","addEventListener","stopCapturingInput","removeEventListener"],"sources":["/home/edi/secario.fun/frondend/src/services/input.js"],"sourcesContent":["import { updateDirection, updateMove, ShootDirection,SetProtected } from './networking.js';\n\n\nconst inputs = {\n    keyDownActions: {\n        'ArrowLeft': { x: -1.5, y: 0 },\n        'ArrowRight': { x: 1.5, y: 0 },\n        'ArrowUp': { y: -1.5, x: 0 },\n        'ArrowDown': { y: 1.5, x: 0 },\n\n        'UpRight': { y: -1.5, x: 1.5 },\n        'UpLeft': { y: -1.5, x: -1.5 },\n        'DownRight': { y: 1.5, x: 1.5 },\n        'DownLeft': { y: 1.5, x: -1.5 },\n    }\n}\nlet keys = {\n    'ArrowLeft': false,\n    'ArrowRight': false,\n    'ArrowUp': false,\n    'ArrowDown': false,\n}\nfunction onkeydownInput(e) {\n    if (e.code === \"Space\") {\n        SetProtected()\n    }\n    else {\n        keys[e.key] = true\n        keydownHandler(e)\n    }\n\n}\n\nfunction onkeyupInput(e) {\n    keys[e.key] = false\n\n}\n\nfunction keydownHandler(e) {\n    let vals;\n    if (keys['ArrowUp'] && keys['ArrowRight']) {\n\n        vals = inputs.keyDownActions['UpRight']\n    } else if (keys['ArrowUp'] && keys['ArrowLeft']) {\n        vals = inputs.keyDownActions['UpLeft']\n    }\n    else if (keys['ArrowDown'] && keys['ArrowLeft']) {\n        vals = inputs.keyDownActions['DownLeft']\n    }\n    else if (keys['ArrowDown'] && keys['ArrowRight']) {\n        vals = inputs.keyDownActions['DownRight']\n    }\n    else {\n        vals = inputs.keyDownActions[e.key];\n    }\n    if (vals) {\n        updateMove(vals);\n    }\n}\n\nfunction onMouseInput(e) {\n    const dir = { x: e.clientX, y: e.clientY };\n    updateDirection(dir);\n}\n\nfunction onClickInput(e) {\n    const dir = Math.atan2(e.clientX - window.innerWidth / 2, window.innerHeight / 2 - e.clientY)\n    ShootDirection(dir);\n}\n\n\nexport function startCapturingInput() {\n    window.addEventListener('mousemove', onMouseInput);\n    window.addEventListener('keydown', onkeydownInput);\n    window.addEventListener('keyup', onkeyupInput);\n    window.addEventListener('click', onClickInput);\n}\n\nexport function stopCapturingInput() {\n    window.removeEventListener('mousemove', onMouseInput);\n    window.removeEventListener('keydown', onkeydownInput);\n    window.removeEventListener('keyup', onkeyupInput);\n    window.removeEventListener('click', onClickInput);\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}