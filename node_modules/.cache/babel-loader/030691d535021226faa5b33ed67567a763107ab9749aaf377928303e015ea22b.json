{"ast":null,"code":"import{useRef,useContext,useEffect}from\"react\";import{connect,play}from\"../../services/networking\";import{startCapturingInput,stopCapturingInput}from\"../../services/input\";import{initState}from\"../../services/state\";import{startRendering,stopRendering}from\"../../services/render\";import GameContext from\"../../gameContext\";import{jsx as _jsx}from\"react/jsx-runtime\";const Canvas=()=>{const canvasRef=useRef();const{Username,setGamestarted}=useContext(GameContext);useEffect(()=>{connect(onGameOver).then(()=>{play(Username);initState();startCapturingInput();startRendering(canvasRef);});return()=>{onGameOver();};},[]);const onGameOver=()=>{stopCapturingInput();stopRendering();setGamestarted(false);};return/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"canvas\",style:{position:\"fixed\"}});};export default Canvas;","map":{"version":3,"names":["useRef","useContext","useEffect","connect","play","startCapturingInput","stopCapturingInput","initState","startRendering","stopRendering","GameContext","jsx","_jsx","Canvas","canvasRef","Username","setGamestarted","onGameOver","then","ref","id","style","position"],"sources":["/home/edi/secario.fun/frondend/src/components/canvas/canvas.jsx"],"sourcesContent":["import { useRef, useContext, useEffect } from \"react\";\nimport { connect, play } from \"../../services/networking\";\nimport { startCapturingInput, stopCapturingInput } from \"../../services/input\";\nimport { initState } from \"../../services/state\";\nimport { startRendering, stopRendering } from \"../../services/render\";\nimport GameContext from \"../../gameContext\";\n\nconst Canvas = () => {\n    const canvasRef = useRef();\n    const { Username, setGamestarted } = useContext(GameContext);\n\n    useEffect(() => {\n        connect(onGameOver).then(() => {\n            play(Username);\n            initState();\n            startCapturingInput();\n            startRendering(canvasRef);\n\n        })\n\n        return () => {\n            onGameOver()\n        };\n    }, []);\n\n    const onGameOver = () => {\n        stopCapturingInput();\n        stopRendering();\n        setGamestarted(false);\n    };\n\n    return (<canvas ref={canvasRef} id=\"canvas\" style={{position:\"fixed\"}}></canvas>)\n}\n\nexport default Canvas"],"mappings":"AAAA,OAASA,MAAM,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACrD,OAASC,OAAO,CAAEC,IAAI,KAAQ,2BAA2B,CACzD,OAASC,mBAAmB,CAAEC,kBAAkB,KAAQ,sBAAsB,CAC9E,OAASC,SAAS,KAAQ,sBAAsB,CAChD,OAASC,cAAc,CAAEC,aAAa,KAAQ,uBAAuB,CACrE,MAAO,CAAAC,WAAW,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAAC,SAAS,CAAGd,MAAM,CAAC,CAAC,CAC1B,KAAM,CAAEe,QAAQ,CAAEC,cAAe,CAAC,CAAGf,UAAU,CAACS,WAAW,CAAC,CAE5DR,SAAS,CAAC,IAAM,CACZC,OAAO,CAACc,UAAU,CAAC,CAACC,IAAI,CAAC,IAAM,CAC3Bd,IAAI,CAACW,QAAQ,CAAC,CACdR,SAAS,CAAC,CAAC,CACXF,mBAAmB,CAAC,CAAC,CACrBG,cAAc,CAACM,SAAS,CAAC,CAE7B,CAAC,CAAC,CAEF,MAAO,IAAM,CACTG,UAAU,CAAC,CAAC,CAChB,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,UAAU,CAAGA,CAAA,GAAM,CACrBX,kBAAkB,CAAC,CAAC,CACpBG,aAAa,CAAC,CAAC,CACfO,cAAc,CAAC,KAAK,CAAC,CACzB,CAAC,CAED,mBAAQJ,IAAA,WAAQO,GAAG,CAAEL,SAAU,CAACM,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAACC,QAAQ,CAAC,OAAO,CAAE,CAAS,CAAC,CACpF,CAAC,CAED,cAAe,CAAAT,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}