{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { processGameUpdate } from './state.js';\nconst socket = io('http://localhost', {\n  'path': '/api/websocket'\n});\nconst JOIN_GAME = 'JOIN_GAME';\nconst GAME_UPDATE = 'GAME_UPDATE';\nconst INPUT = 'INPUT';\nconst INPUT_KEY = 'INPUT_KEY';\nconst SHOOT_KEY = 'SHOOT_KEY';\nconst GAME_OVER = 'GAME_OVER';\nconst connectedPromise = new Promise(resolve => {\n  socket.on('connect', () => {\n    console.log('Connected to server!');\n    resolve();\n  });\n});\nexport const connect = onGameOver => connectedPromise.then(() => {\n  socket.on(GAME_UPDATE, processGameUpdate);\n  socket.on(GAME_OVER, onGameOver);\n  socket.on('disconnect', () => {\n    console.log('Disconnected from server.');\n    document.getElementById('disconnect-modal').classList.remove('hidden');\n    document.getElementById('reconnect-button').onclick = () => {\n      window.location.reload();\n    };\n  });\n});\nexport const play = username => {\n  socket.emit(JOIN_GAME, username);\n};\nexport const updateDirection = dir => {\n  socket.emit(INPUT, dir);\n};\nexport const updateMove = dir => {\n  const dirAngle = Math.atan2(dir.x, dir.y);\n  socket.emit(INPUT_KEY, dir);\n};\nexport const ShootDirection = dir => {\n  socket.emit(SHOOT_KEY, dir);\n};\n_c = ShootDirection;\nvar _c;\n$RefreshReg$(_c, \"ShootDirection\");","map":{"version":3,"names":["io","processGameUpdate","socket","JOIN_GAME","GAME_UPDATE","INPUT","INPUT_KEY","SHOOT_KEY","GAME_OVER","connectedPromise","Promise","resolve","on","console","log","connect","onGameOver","then","document","getElementById","classList","remove","onclick","window","location","reload","play","username","emit","updateDirection","dir","updateMove","dirAngle","Math","atan2","x","y","ShootDirection","_c","$RefreshReg$"],"sources":["/home/edi/secario.fun/frondend/src/services/networking.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { processGameUpdate } from './state.js';\nconst socket = io('http://localhost',{'path': '/api/websocket'});\nconst JOIN_GAME = 'JOIN_GAME';\nconst GAME_UPDATE = 'GAME_UPDATE';\nconst INPUT = 'INPUT'\nconst INPUT_KEY = 'INPUT_KEY'\nconst SHOOT_KEY = 'SHOOT_KEY'\nconst GAME_OVER = 'GAME_OVER'\n\nconst connectedPromise = new Promise(resolve => {\n    socket.on('connect', () => {\n        console.log('Connected to server!');\n        resolve();\n    });\n})\n\n\nexport const connect = onGameOver => (\n    connectedPromise.then(() => {\n        socket.on(GAME_UPDATE, processGameUpdate);\n        socket.on(GAME_OVER, onGameOver);\n        socket.on('disconnect', () => {\n            console.log('Disconnected from server.');\n            document.getElementById('disconnect-modal').classList.remove('hidden');\n            document.getElementById('reconnect-button').onclick = () => {\n                window.location.reload();\n            };\n        });\n    })\n);\n\nexport const play = username => {\n    socket.emit(JOIN_GAME, username);\n};\n\nexport const updateDirection = dir => {\n    socket.emit(INPUT, dir);\n};\n\nexport const updateMove = dir =>{\n    const dirAngle = Math.atan2(dir.x, dir.y)\n    socket.emit(INPUT_KEY, dir);\n\n};\n\nexport const ShootDirection = dir =>{\n    socket.emit(SHOOT_KEY, dir);\n\n};\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,iBAAiB,QAAQ,YAAY;AAC9C,MAAMC,MAAM,GAAGF,EAAE,CAAC,kBAAkB,EAAC;EAAC,MAAM,EAAE;AAAgB,CAAC,CAAC;AAChE,MAAMG,SAAS,GAAG,WAAW;AAC7B,MAAMC,WAAW,GAAG,aAAa;AACjC,MAAMC,KAAK,GAAG,OAAO;AACrB,MAAMC,SAAS,GAAG,WAAW;AAC7B,MAAMC,SAAS,GAAG,WAAW;AAC7B,MAAMC,SAAS,GAAG,WAAW;AAE7B,MAAMC,gBAAgB,GAAG,IAAIC,OAAO,CAACC,OAAO,IAAI;EAC5CT,MAAM,CAACU,EAAE,CAAC,SAAS,EAAE,MAAM;IACvBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IACnCH,OAAO,CAAC,CAAC;EACb,CAAC,CAAC;AACN,CAAC,CAAC;AAGF,OAAO,MAAMI,OAAO,GAAGC,UAAU,IAC7BP,gBAAgB,CAACQ,IAAI,CAAC,MAAM;EACxBf,MAAM,CAACU,EAAE,CAACR,WAAW,EAAEH,iBAAiB,CAAC;EACzCC,MAAM,CAACU,EAAE,CAACJ,SAAS,EAAEQ,UAAU,CAAC;EAChCd,MAAM,CAACU,EAAE,CAAC,YAAY,EAAE,MAAM;IAC1BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;IACxCI,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;IACtEH,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACG,OAAO,GAAG,MAAM;MACxDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC5B,CAAC;EACL,CAAC,CAAC;AACN,CAAC,CACJ;AAED,OAAO,MAAMC,IAAI,GAAGC,QAAQ,IAAI;EAC5BzB,MAAM,CAAC0B,IAAI,CAACzB,SAAS,EAAEwB,QAAQ,CAAC;AACpC,CAAC;AAED,OAAO,MAAME,eAAe,GAAGC,GAAG,IAAI;EAClC5B,MAAM,CAAC0B,IAAI,CAACvB,KAAK,EAAEyB,GAAG,CAAC;AAC3B,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGD,GAAG,IAAG;EAC5B,MAAME,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAACK,CAAC,EAAEL,GAAG,CAACM,CAAC,CAAC;EACzClC,MAAM,CAAC0B,IAAI,CAACtB,SAAS,EAAEwB,GAAG,CAAC;AAE/B,CAAC;AAED,OAAO,MAAMO,cAAc,GAAGP,GAAG,IAAG;EAChC5B,MAAM,CAAC0B,IAAI,CAACrB,SAAS,EAAEuB,GAAG,CAAC;AAE/B,CAAC;AAACQ,EAAA,GAHWD,cAAc;AAAA,IAAAC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}