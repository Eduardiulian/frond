{"ast":null,"code":"import{updateDirection,updateMove,ShootDirection}from'./networking.js';const inputs={keyDownActions:{'ArrowLeft':{x:-1.5,y:0},'ArrowRight':{x:1.5,y:0},'ArrowUp':{y:-1.5,x:0},'ArrowDown':{y:1.5,x:0},'UpRight':{y:-1.5,x:1.5},'UpLeft':{y:-1.5,x:-1.5},'DownRight':{y:1.5,x:1.5},'DownLeft':{y:1.5,x:-1.5}}};let keys={'ArrowLeft':false,'ArrowRight':false,'ArrowUp':false,'ArrowDown':false};function onkeydownInput(e){keys[e.key]=true;keydownHandler(e);}function onkeyupInput(e){keys[e.key]=false;}function keydownHandler(e){let vals;if(keys['ArrowUp']&&keys['ArrowRight']){vals=inputs.keyDownActions['UpRight'];}else if(keys['ArrowUp']&&keys['ArrowLeft']){vals=inputs.keyDownActions['UpLeft'];}else if(keys['ArrowDown']&&keys['ArrowLeft']){vals=inputs.keyDownActions['DownLeft'];}else if(keys['ArrowDown']&&keys['ArrowRight']){vals=inputs.keyDownActions['DownRight'];}else{vals=inputs.keyDownActions[e.key];}if(vals){updateMove(vals);}}function onMouseInput(e){const dir={x:e.clientX,y:e.clientY};updateDirection(dir);}function onClickInput(e){const dir=Math.atan2(e.clientX-window.innerWidth/2,window.innerHeight/2-e.clientY);ShootDirection(dir);}export function startCapturingInput(){window.addEventListener('mousemove',onMouseInput);window.addEventListener('keydown',onkeydownInput);window.addEventListener('keyup',onkeyupInput);window.addEventListener('click',onClickInput);}export function stopCapturingInput(){window.removeEventListener('mousemove',onMouseInput);window.removeEventListener('keydown',onkeydownInput);window.removeEventListener('keyup',onkeyupInput);window.removeEventListener('click',onClickInput);}","map":{"version":3,"names":["updateDirection","updateMove","ShootDirection","inputs","keyDownActions","x","y","keys","onkeydownInput","e","key","keydownHandler","onkeyupInput","vals","onMouseInput","dir","clientX","clientY","onClickInput","Math","atan2","window","innerWidth","innerHeight","startCapturingInput","addEventListener","stopCapturingInput","removeEventListener"],"sources":["/home/edi/secario.fun/frondend/src/services/input.js"],"sourcesContent":["import { updateDirection, updateMove, ShootDirection } from './networking.js';\n\n\nconst inputs = {\n    keyDownActions: {\n        'ArrowLeft': { x: -1.5, y: 0 },\n        'ArrowRight': { x: 1.5, y: 0 },\n        'ArrowUp': { y: -1.5, x: 0 },\n        'ArrowDown': { y: 1.5, x: 0 },\n\n        'UpRight': { y: -1.5, x: 1.5 },\n        'UpLeft': { y: -1.5, x: -1.5 },\n        'DownRight': { y: 1.5, x: 1.5 },\n        'DownLeft': { y: 1.5, x: -1.5 },\n    }\n}\nlet keys = {\n    'ArrowLeft': false,\n    'ArrowRight': false,\n    'ArrowUp': false,\n    'ArrowDown': false,\n}\nfunction onkeydownInput(e) {\n    keys[e.key] = true\n    keydownHandler(e)\n\n}\n\nfunction onkeyupInput(e) {\n    keys[e.key] = false\n\n}\n\nfunction keydownHandler(e) {\n    let vals;\n    if (keys['ArrowUp'] && keys['ArrowRight']) {\n\n        vals = inputs.keyDownActions['UpRight']\n    } else if (keys['ArrowUp'] && keys['ArrowLeft']) {\n        vals = inputs.keyDownActions['UpLeft']\n    }\n    else if (keys['ArrowDown'] && keys['ArrowLeft']) {\n        vals = inputs.keyDownActions['DownLeft']\n    }\n    else if (keys['ArrowDown'] && keys['ArrowRight']) {\n        vals = inputs.keyDownActions['DownRight']\n    }\n    else {\n        vals = inputs.keyDownActions[e.key];\n    }\n    if (vals) {\n        updateMove(vals);\n    }\n}\n\nfunction onMouseInput(e) {\n    const dir = { x: e.clientX, y: e.clientY };\n    updateDirection(dir);\n}\n\nfunction onClickInput(e) {\n    const dir = Math.atan2(e.clientX - window.innerWidth / 2, window.innerHeight / 2 - e.clientY)\n    ShootDirection(dir);\n}\n\n\nexport function startCapturingInput() {\n    window.addEventListener('mousemove', onMouseInput);\n    window.addEventListener('keydown', onkeydownInput);\n    window.addEventListener('keyup', onkeyupInput);\n    window.addEventListener('click', onClickInput);\n}\n\nexport function stopCapturingInput() {\n    window.removeEventListener('mousemove', onMouseInput);\n    window.removeEventListener('keydown', onkeydownInput);\n    window.removeEventListener('keyup', onkeyupInput);\n    window.removeEventListener('click', onClickInput);\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}